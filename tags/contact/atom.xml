<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Contact | 乐者为王]]></title>
  <link href="http://codemany.com/tags/contact/atom.xml" rel="self"/>
  <link href="http://codemany.com/"/>
  <updated>2014-08-24T22:32:13+08:00</updated>
  <id>http://codemany.com/</id>
  <author>
    <name><![CDATA[dohkoos]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Android下显示本地Contact Number信息（续）]]></title>
    <link href="http://codemany.com/blog/2010/02/13/display-the-local-contact-number-on-android-continued/"/>
    <updated>2010-02-13T11:54:41+08:00</updated>
    <id>http://codemany.com/blog/2010/02/13/display-the-local-contact-number-on-android-continued</id>
    <content type="html"><![CDATA[<p>前文的代码只能显示联系人的第一个号码，很不方便。如果要列出联系人的所有号码，需要将People.CONTENT_URI改为Phones.CONTENT_URI。具体代码如下：</p>

<p>```
package com.codemany.simassit;</p>

<p>import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.Contacts.People;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;</p>

<p>public class MainActivity extends Activity {</p>

<pre><code>@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contact_list);

    ListView contactList = (ListView)findViewById(R.id.contactList);

    Cursor contactsCursor = managedQuery(Phones.CONTENT_URI,
            null, null, null, null);
    startManagingCursor(contactsCursor);

    String[] columnsToMap = new String[] {Phones.NAME, Phones.NUMBER};
    int[] mapTo = new int[] {R.id.contactName, R.id.contactNumber};

    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this,
            R.layout.contact_entry, contactsCursor,
            columnsToMap, mapTo);
    contactList.setAdapter(mAdapter);
}
</code></pre>

<p>}
```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Android下显示本地Contact Number信息]]></title>
    <link href="http://codemany.com/blog/2010/01/23/display-the-local-contact-number-on-android/"/>
    <updated>2010-01-23T14:26:55+08:00</updated>
    <id>http://codemany.com/blog/2010/01/23/display-the-local-contact-number-on-android</id>
    <content type="html"><![CDATA[<p>首先要在AndroidManifest.xml中设置允许读取联系人的权限：</p>

<p><code>
&lt;uses-permission android:name="android.permission.READ_CONTACTS" /&gt;
</code></p>

<p>contact_list.xml</p>

<p>```
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;LinearLayout xmlns:android="<a href="http://schemas.android.com/apk/res/android">http://schemas.android.com/apk/res/android</a>"</p>

<pre><code>  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"&gt;
&lt;ListView android:id="@+id/contactList"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /&gt;
</code></pre>

<p></LinearLayout>
```</p>

<p>contact_entry.xml</p>

<p>```
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;LinearLayout xmlns:android="<a href="http://schemas.android.com/apk/res/android">http://schemas.android.com/apk/res/android</a>"</p>

<pre><code>  android:layout_width="fill_parent"
  android:layout_height="fill_parent"&gt;
&lt;TextView android:id="@+id/contactName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /&gt;
&lt;TextView android:id="@+id/contactNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /&gt;
</code></pre>

<p></LinearLayout>
```</p>

<p>MainActivity.java</p>

<p>```
package com.codemany.simassit;</p>

<p>import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.Contacts.People;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;</p>

<p>public class MainActivity extends Activity {</p>

<pre><code>@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contact_list);

    ListView contactList = (ListView)findViewById(R.id.contactList);

    Cursor contactsCursor = managedQuery(People.CONTENT_URI,
            null, null, null, null);
    startManagingCursor(contactsCursor);

    String[] columnsToMap = new String[] {People.NAME, People.NUMBER};
    int[] mapTo = new int[] {R.id.contactName, R.id.contactNumber};

    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this,
            R.layout.contact_entry, contactsCursor,
            columnsToMap, mapTo);
    contactList.setAdapter(mAdapter);
}
</code></pre>

<p>}
```</p>
]]></content>
  </entry>
  
</feed>
