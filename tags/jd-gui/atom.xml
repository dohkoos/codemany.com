<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: JD-GUI | 乐者为王]]></title>
  <link href="http://codemany.com/tags/jd-gui/atom.xml" rel="self"/>
  <link href="http://codemany.com/"/>
  <updated>2016-05-01T22:21:08+08:00</updated>
  <id>http://codemany.com/</id>
  <author>
    <name><![CDATA[dohkoos]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[反编译Android APK文件]]></title>
    <link href="http://codemany.com/blog/decompile-android-apk-file/"/>
    <updated>2011-07-01T06:07:07+08:00</updated>
    <id>http://codemany.com/blog/decompile-android-apk-file</id>
    <content type="html"><![CDATA[<p>classes.dex是Java源代码编译后生成的字节码文件。由于Android使用的Dalvik虚拟机与标准的Java虚拟机是不兼容的，因此，dex文件与class文件相比，不论是文件结构还是opcode都不一样。</p>

<p>目前市面上有多种反编译dex的工具，下面我们就来把它们逐个介绍下。</p>

<h3 id="dexdump">dexdump</h3>

<p>dexdump是Android开发包提供的反编译工具。用法是，首先启动Android模拟器，把要反编译的dex文件用adb push命令推送到模拟器中，然后通过adb shell登录，找到该dex文件，执行dexdump example.dex。总的来说dexdump功能比较弱，且用起来麻烦，反编译的结果可读性也很差。</p>

<h3 id="dedexer"><a href="http://dedexer.sourceforge.net/">Dedexer</a></h3>

<p>另一个反编译工具是Dedexer，反编译的效果比较好。它可以读取dex格式的文件，生成一种类似于汇编语言的输出。与dexdump相比它至少有3个优点：</p>

<ol>
<li>不需要在Android模拟器中运行；</li>
<li>反编译后的文件目录结构和源代码的目录结构相近，每个class文件对应一个ddx文件。不像dexdump那样把所有的结果都放在一起；</li>
<li>可以作为反编译引擎。</li>
</ol>

<p>它的使用的方法如下：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">java -jar ddx1.11.jar -o -D -r -d src classes.dex
</code></pre></div>
<h3 id="axmlprinter2"><a href="https://code.google.com/p/android4me/">AXMLPrinter2</a></h3>

<p>APK中的资源通常是压缩过的，用文本工具看都是乱码，不过我们可以用AXMLPrinter2将其转换成可读的XML文件。具体命令为：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">java -jar AXMLPrinter2.jar example.xml output.xml
</code></pre></div>
<h3 id="apktool"><a href="https://code.google.com/p/android-apktool/">apktool</a></h3>

<p>目前最好的反编译工具是apktool。可以帮助我们把APK文件反编译，输出smali格式的代码、图片和资源等文件，还可以在修改后重新打包。将下载下来的apktool和apktool-install-windows解压到同一目录，可以看到有三个文件：aapt.exe，apktool.bat和apktool.jar。以下是它的使用方法：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">apktool d example.apk
apktool b example
</code></pre></div>
<h3 id="dex2jar-jd-gui"><a href="https://code.google.com/p/dex2jar/">dex2jar</a> + <a href="http://jd.benow.ca/">JD-GUI</a></h3>

<p>dex2jar是一个将dex文件转换成jar文件的工具：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">dex2jar example.apk  # 会将apk文件中的classes.dex转换成jar文件
</code></pre></div>
<p>生成的jar文件可以用JD GUI工具直接打开查看。</p>

<h3 id="smali"><a href="https://code.google.com/p/smali/">smali</a></h3>

<p>smali可以反编译dex文件，也可以把你修改过的代码重新编译成dex：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">java -jar baksmali.jar classes.dex -o classes
java -jar smali.jar classes -o classes.dex
</code></pre></div>]]></content>
  </entry>
  
</feed>
