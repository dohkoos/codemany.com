<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Fleximage | 乐者为王]]></title>
  <link href="http://codemany.com/tags/fleximage/atom.xml" rel="self"/>
  <link href="http://codemany.com/"/>
  <updated>2014-08-22T23:28:43+08:00</updated>
  <id>http://codemany.com/</id>
  <author>
    <name><![CDATA[dohkoos]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[为什么使用Paperclip而不是Fleximage来实现图片上传]]></title>
    <link href="http://codemany.com/blog/2010/05/28/why-using-paperclip-instead-of-fleximage-to-upload-picture/"/>
    <updated>2010-05-28T07:38:50+08:00</updated>
    <id>http://codemany.com/blog/2010/05/28/why-using-paperclip-instead-of-fleximage-to-upload-picture</id>
    <content type="html"><![CDATA[<p>Rails有很多处理上传的插件：
<a href="http://github.com/activescaffold/file_column">FileColumn</a>
<a href="http://github.com/jnicklas/uploadcolumn">UploadColumn</a>
<a href="http://code.google.com/p/activeupload/">ActiveUpload</a>
acts_as_attachment
<a href="http://github.com/technoweenie/attachment_fu">attachment_fu</a>
<a href="http://github.com/thoughtbot/paperclip">Paperclip</a>
<a href="http://github.com/Squeegy/fleximage">Fleximage</a></p>

<p>FileColumn是最早的这类插件。FileColumn比较容易用。ActiveUpload需要SWFUpload配合使用。attachment_fu作为acts_as_attachment的进化版本非常强大，不过使用起来比较复杂。Fleximage是现在上传图片与处理图片的首选，据说连Paperclip也比不上它，不过使用下来的情况是使用简单，功能太弱，比如要把上传的图片放到以用户名为目录名的文件夹中就实现不了，而且上传的图片名字也不能设定。Paperclip作为一个处理附件上传的插件，既有attachment_fu的功能强大，又有Fleximage的使用简单，相对于FileColumn在灵活性和效率上更胜一筹，而且代码也比较好看。</p>

<p>将用户名作为上传图片的目录，先要在config/initializers中创建一个paperclip.rb文件，定义一个username变量：<br />
<code>
// config/initializers/paperclip.rb&lt;br /&gt;
Paperclip.interpolates :username do |attachment, style|&lt;br /&gt;
  attachment.instance.user.login&lt;br /&gt;
end&lt;br /&gt;
</code></p>

<p>上面的代码中attachment.instance就是指该附件实例，因为在avatar.rb中有如下语句：<br />
<code>
belongs_to :user&lt;br /&gt;
</code></p>

<p>所以该实例有一个user对象，user对象有个login字段，该字段就是我们需要的用户名。</p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用fleximage上传图片时的一些问题]]></title>
    <link href="http://codemany.com/blog/2010/04/05/using-fleximage-upload-pictures-of-some-of-the-problems/"/>
    <updated>2010-04-05T02:09:40+08:00</updated>
    <id>http://codemany.com/blog/2010/04/05/using-fleximage-upload-pictures-of-some-of-the-problems</id>
    <content type="html"><![CDATA[<p>因为只是处理图片，所以选择了<a href="http://github.com/Squeegy/fleximage">fleximage</a>，一个单纯的上传和处理图片的Rails插件。本来是想用fleximage和mini_magick的，因为看到有文章说rmagick有内存泄露问题，可惜就是fleximage不能指定processor。</p>

<p>到<a href="http://rubyforge.org/frs/?group_id=12&release_id=39888"><a href="http://rubyforge.org/frs/?group_id=12&amp;release_id=39888">http://rubyforge.org/frs/?group_id=12&amp;release_id=39888</a></a>下载RMagick-2.12.0-ImageMagick-6.5.6-8-Q8.zip，解压后安装文件夹中的gem和exe文件。</p>

<p>fleximage项目的wiki上有些资料已经过时了。它说渲染图片的时候要创建flexi文件，还要修改相应的action方法，添加format.image_type到respond_to代码块中，并且在view中使用formatted_photo_path来显示图片，但事实上formatted_photo_path已经被抛弃了（起先也没发现，直到为了解决一个问题查看了log才知道），可以直接使用image_tag或photo_url。或者干脆不建什么flexi文件，也不添加format.image_type到action中，直接就在view中使用embedded_image_tag方法，也可以渲染图片的。</p></p>
]]></content>
  </entry>
  
</feed>
