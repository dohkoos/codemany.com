<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: WebLogic | 乐者为王]]></title>
  <link href="http://codemany.com/tags/weblogic/atom.xml" rel="self"/>
  <link href="http://codemany.com/"/>
  <updated>2017-07-24T19:55:01+08:00</updated>
  <id>http://codemany.com/</id>
  <author>
    <name><![CDATA[dohkoos]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[com.sybase.jdbc.SybSQLException: The parameter '@user' in the procedure 'sp_adm_chk_lvl' was not declared as an OUTPUT parameter]]></title>
    <link href="http://codemany.com/blog/comsybasejdbcsybsqlexception-the-parameter-in-the-procedure-was-not-declared-as-an-output-parameter/"/>
    <updated>2007-06-01T17:33:13+08:00</updated>
    <id>http://codemany.com/blog/comsybasejdbcsybsqlexception-the-parameter-in-the-procedure-was-not-declared-as-an-output-parameter</id>
    <content type="html"><![CDATA[<p>运行环境：WebLogic 8.16 + Sybase ASE 12.5</p>

<p>问题：The New, Save from File menu are grayed out</p>

<p>分析打印出来的日志文件找到有以下异常出现：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">org.springframework.jdbc.UncategorizedSQLException: CallableStatementCallback
    ; uncategorized SQLException for SQL [{? = call sp_adm_chk_lvl(?, ?, ?, ?, ?, ?, ?)}]
    ; SQL state [ZZZZZ]; error code [276]
    ; The parameter &#39;@user&#39; in the procedure &#39;sp_adm_chk_lvl&#39; was not declared as an OUTPUT parameter.
    ; nested exception is com.sybase.jdbc.SybSQLException: The parameter &#39;@user&#39; in the procedure &#39;sp_adm_chk_lvl&#39; was not declared as an OUTPUT parameter.
</code></pre></div>
<p>搜索到一篇出现类似问题的文章 <a href="http://www.ibm.com/support/docview.wss?uid=swg21174150">http://www.ibm.com/support/docview.wss?uid=swg21174150</a> ，其中有这么一段文字：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">If you call CallableStatement.clearParameters() when the statement has a ?=rpc return value,
we forget that there is a return value and the next time the rpc is executed we send too many
input parameters, and they are all shifted to the right. This problem has been corrected,
and jConnect now has the expected behavior for the clearParameters() method.
</code></pre></div>
<p>因此猜测菜单变灰的问题是由于使用了不正确的JDBC Driver版本。在Weblogic Console发现Connection Pools中Driver Name是com.sybase.jdbc.SybDriver，而正确的设置应该是com.sybase.jdbc2.jdbc.SybDriver，修改Driver Name后New, Save菜单项果然可以正常使用了。</p>
]]></content>
  </entry>
  
</feed>
