<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: TabWidget | 乐者为王]]></title>
  <link href="http://codemany.com/tags/tabwidget/atom.xml" rel="self"/>
  <link href="http://codemany.com/"/>
  <updated>2014-11-19T18:10:15+08:00</updated>
  <id>http://codemany.com/</id>
  <author>
    <name><![CDATA[dohkoos]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Android Tab导航总结]]></title>
    <link href="http://codemany.com/blog/summary-of-android-tab-navigation/"/>
    <updated>2011-09-09T08:55:45+08:00</updated>
    <id>http://codemany.com/blog/summary-of-android-tab-navigation</id>
    <content type="html"><![CDATA[<p>TabHost是整个Tab的容器，包括TabWidget和FrameLayout两部分：TabWidget用于展示标签页，FrameLayout用于展示隶属于各个标签页的具体内容。一个带有TabHost的Activity看起来就像这样：</p>

<p>{% img /uploads/android-tabs.jpg android-tabs %}</p>

<p>如果Activity是继承自TabAcitivty，那么TabHost的id必须设置为@android:id/tabhost，TabWidget必须设置为@android:id/tabs，FrameLayout需要设置为@android:id/tabcontent。</p>

<p>1、创建一个简单的Tab应用</p>

<p>废话不多说，直接上代码。以下就是main.xml的布局代码：</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"&gt;
    &lt;LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"&gt;
        &lt;TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" /&gt;
        &lt;FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"&gt;
            &lt;include android:id="@+id/left" layout="@layout/tab_left" /&gt;
            &lt;include android:id="@+id/right" layout="@layout/tab_right" /&gt;
        &lt;/FrameLayout&gt;
    &lt;/LinearLayout&gt;
&lt;/TabHost&gt;
</code></pre>

<p>左边标签页tab_left.xml的内容：</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"&gt;
    &lt;TextView
        android:text="left"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /&gt;
&lt;/LinearLayout&gt;
</code></pre>

<p>右边标签页tab_right.xml的内容：</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"&gt;
    &lt;TextView
        android:text="right"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /&gt;
&lt;/LinearLayout&gt;
</code></pre>

<p>修改MainActivity，改成从TabActivity继承：</p>

<pre><code>public class MainActivity extends TabActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();
        tabHost.addTab(tabHost.newTabSpec("left")
                .setIndicator("Left")
                .setContent(R.id.left));
        tabHost.addTab(tabHost.newTabSpec("right")
                .setIndicator("Right")
                .setContent(R.id.right));
        tabHost.setCurrentTab(0);
    }
}
</code></pre>

<p>到这里，一个简单至极的Tab应用已经完成了。不过在实际情况中，每个Tab页会有多个控件，并且有很多业务逻辑在其中。如果使用上述代码，将所有控件和逻辑放在一个类中，那么这个类将变的极度臃肿，以后维护也会变的非常困难。需要找个简单且优雅的方案解决这个问题。</p>

<p>2、简单优雅且容易维护的Tab应用</p>

<p>上面的实现有个缺陷，标签页相关的代码逻辑都在MainActivity类中，导致单个类臃肿，给后续维护造成不便。可以考虑把相关的代码逻辑移到对应的类中。</p>

<p>删除main.xml中的include语句：</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"&gt;
    &lt;LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"&gt;
        &lt;TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" /&gt;
        &lt;FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" /&gt;
    &lt;/LinearLayout&gt;
&lt;/TabHost&gt;
</code></pre>

<p>新建TabLeftActivity和TabRightActivity类：</p>

<pre><code>public class TabLeftActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_left);

        // do something
    }
}
</code></pre>

<pre><code>public class TabRightActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_right);

        // do something
    }
}
</code></pre>

<p>修改MainAcvitity为如下代码：</p>

<pre><code>public class MainActivity extends TabActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();
        tabHost.addTab(tabHost.newTabSpec("left")
                .setIndicator("Left")
                .setContent(new Intent(this, TabLeftActivity.class)));
        tabHost.addTab(tabHost.newTabSpec("right")
                .setIndicator("Right")
                .setContent(new Intent(this, TabRightActivity.class)));
        tabHost.setCurrentTab(0);
    }
}
</code></pre>

<p>最后，不要忘记在AndroidManifest.xml中注册TabLeftActivity和TabRightAcvitity这两个Activity。</p>

<p>3、如何将Tab显示在下方</p>

<p>这个非常简单，只要将main.xml中的LinearLayout改成RelativeLayout，然后给TagWidget添加android:layout_alignParentBottom=&ldquo;true&#8221;属性即可。当然也可以在main.xml中把TabWidget放在FrameLayout下面。</p>
]]></content>
  </entry>
  
</feed>
