<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: exception_notification | 乐者为王]]></title>
  <link href="http://codemany.com/tags/exception-notification/atom.xml" rel="self"/>
  <link href="http://codemany.com/"/>
  <updated>2014-08-21T22:32:52+08:00</updated>
  <id>http://codemany.com/</id>
  <author>
    <name><![CDATA[dohkoos]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[用Rails 2.3打造简单记账软件(11)]]></title>
    <link href="http://codemany.com/blog/2010/01/05/using-the-rails23-to-create-a-simple-accounting-app-11/"/>
    <updated>2010-01-05T04:43:29+08:00</updated>
    <id>http://codemany.com/blog/2010/01/05/using-the-rails23-to-create-a-simple-accounting-app-11</id>
    <content type="html"><![CDATA[<p>当网站出现问题时，让它发送一份错误报告到你的邮箱是件挺不错的事，这样你就不必再担心不能及时发现问题了。</p>

<p><a href="http://github.com/rails/exception_notification">exception_notification</a>插件的功能就是当你的Rails应用出错时，它会向指定的邮箱地址发送错误日志。</p>

<p>使用很简单，安装插件后配置一下邮件接受者就可以了。</p>

<p>安装插件<br />
<code>
script/plugin install git://github.com/rails/exception_notification.git&lt;br /&gt;
</code></p>

<p>在config/environment.rb中增加邮件接收者的地址<br />
```
Rails::Initializer.run do |config|<br />
  ...<br />
end</p>

<p>ExceptionNotifier.exception_recipients = %w(<a href="&#109;&#x61;&#x69;&#x6c;&#116;&#x6f;&#x3a;&#x79;&#111;&#117;&#x72;&#110;&#97;&#109;&#x65;&#64;&#101;&#x78;&#x61;&#109;&#x70;&#108;&#101;&#46;&#99;&#x6f;&#x6d;">&#121;&#x6f;&#x75;&#114;&#x6e;&#x61;&#109;&#x65;&#64;&#101;&#x78;&#97;&#x6d;&#112;&#x6c;&#x65;&#x2e;&#x63;&#111;&#109;</a>)<br />
```</p>

<p>然后告诉Exception Notifier哪些controller出错才发送日志，当然是全部啦：<br />
<code>
class ApplicationController &lt; ActionController::Base&lt;br /&gt;
  include ExceptionNotifiable&lt;br /&gt;
  ...&lt;br /&gt;
end&lt;br /&gt;
</code></p>

<p>Exception Notifier采用Rails中的ActionMailer发送邮件，所以使用的前提是确保ActionMailer可以正常发送邮件。还有就是Exception Notifier默认只在production环境下才会生效，如果想要在development下也生效，需要将development.rb文件中的<br />
<code>
config.action_mailer.raise_delivery_errors = false&lt;br /&gt;
</code></p>

<p>修改为<br />
<code>
config.action_mailer.raise_delivery_errors = true&lt;br /&gt;
</code></p>
]]></content>
  </entry>
  
</feed>
