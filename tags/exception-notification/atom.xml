<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: exception_notification | 乐者为王]]></title>
  <link href="http://codemany.com/tags/exception-notification/atom.xml" rel="self"/>
  <link href="http://codemany.com/"/>
  <updated>2014-10-11T20:28:20+08:00</updated>
  <id>http://codemany.com/</id>
  <author>
    <name><![CDATA[dohkoos]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[用Rails 2.3打造简单记账软件（11）]]></title>
    <link href="http://codemany.com/blog/2010/01/05/using-rails-23-to-create-a-simple-accounting-app-part11/"/>
    <updated>2010-01-05T20:43:29+08:00</updated>
    <id>http://codemany.com/blog/2010/01/05/using-rails-23-to-create-a-simple-accounting-app-part11</id>
    <content type="html"><![CDATA[<p>当网站出现问题时，让它发送一份错误报告到你的邮箱是件挺不错的事，这样你就不必再担心不能及时发现问题了。</p>

<p><a href="https://github.comrails/exception_notification">exception_notification</a>插件的功能就是当你的Rails应用出错时，它会向指定的邮箱地址发送错误日志。</p>

<p>使用很简单，安装插件后配置一下邮件接受者就可以了。</p>

<p>安装插件</p>

<p><code>
script/plugin install git://github.com/rails/exception_notification.git
</code></p>

<p>在config/environment.rb中增加邮件接收者的地址：</p>

<p>```
Rails::Initializer.run do |config|
  # Settings in config/environments/* take precedence over those specified here.
  # Application configuration should go into files in config/initializers
  # -- all .rb files in that directory are automatically loaded.</p>

<p>  config.i18n.default_locale = :zh
end</p>

<p>ExceptionNotifier.exception_recipients = %w(<a href="&#109;&#x61;&#105;&#x6c;&#x74;&#x6f;&#58;&#x79;&#x6f;&#x75;&#x72;&#110;&#x61;&#109;&#x65;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#x6c;&#x65;&#46;&#x63;&#111;&#x6d;">&#x79;&#111;&#x75;&#x72;&#x6e;&#x61;&#x6d;&#101;&#64;&#101;&#x78;&#97;&#109;&#112;&#x6c;&#x65;&#x2e;&#x63;&#111;&#109;</a>)
```</p>

<p>然后告诉Exception Notifier哪些controller出错才发送日志，当然是全部啦：</p>

<p><code>
class ApplicationController &lt; ActionController::Base
  include ExceptionNotifiable
</code></p>

<p>Exception Notifier采用Rails中的ActionMailer发送邮件，所以使用的前提是确保ActionMailer可以正常发送邮件。还有就是Exception Notifier默认只在production环境下才会生效，如果想要在development下也生效，需要将development.rb文件中的：</p>

<p><code>
config.action_mailer.raise_delivery_errors = false
</code></p>

<p>修改为</p>

<p><code>
config.action_mailer.raise_delivery_errors = true
</code></p>
]]></content>
  </entry>
  
</feed>
