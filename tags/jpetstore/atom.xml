<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: JPetStore | 乐者为王]]></title>
  <link href="http://codemany.com/tags/jpetstore/atom.xml" rel="self"/>
  <link href="http://codemany.com/"/>
  <updated>2017-10-27T09:39:42+08:00</updated>
  <id>http://codemany.com/</id>
  <author>
    <name><![CDATA[dohkoos]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[JPetStore 4.0.5配置MySQL数据库时遇到的问题]]></title>
    <link href="http://codemany.com/blog/problem-configuring-jpetstore-405-with-mysql/"/>
    <updated>2005-03-09T16:33:39+08:00</updated>
    <id>http://codemany.com/blog/problem-configuring-jpetstore-405-with-mysql</id>
    <content type="html"><![CDATA[<p>在配置JPetStore 4.0.5时出了一点问题，写此文章记录下解决方法，以便日后查找。</p>

<p>按照教程配置好后运行Tomcat，在点击“Enter the Store”时出现了HTTP 500错误。从日志中的异常记录来看是没有找到MySQL的驱动程序。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">SimpleDataSource: Error while loading properties. Cause: java.lang.ClassNotFoundException: driver
</code></pre></div>
<p>可是我已经把驱动程序包放到WEB-INF/lib目录下了呀！</p>

<p>查看sql-xml-config.xml文件中dataSource的属性，发现它们的值如下：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;transactionManager type=&quot;JDBC&quot;&gt;
    &lt;dataSource type=&quot;SIMPLE&quot;&gt;
        &lt;property value=&quot;${driver}&quot; name=&quot;JDBC.Driver&quot; /&gt;
        &lt;property value=&quot;${url}&quot; name=&quot;JDBC.ConnectionURL&quot; /&gt;
        &lt;property value=&quot;${username}&quot; name=&quot;JDBC.Username&quot; /&gt;
        &lt;property value=&quot;${password}&quot; name=&quot;JDBC.Password&quot; /&gt;
        &lt;property value=&quot;15&quot; name=&quot;Pool.MaximumActiveConnections&quot; /&gt;
        &lt;property value=&quot;15&quot; name=&quot;Pool.MaximumIdleConnections&quot; /&gt;
        &lt;property value=&quot;1000&quot; name=&quot;Pool.MaximumWait&quot; /&gt;
      &lt;/dataSource&gt;
&lt;/transactionManager&gt;
</code></pre></div>
<p>而在database.properties中的值分别是：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">SimpleDriver=org.gjt.mm.mysql.Driver
SimpleUrl=jdbc:mysql://localhost:3306/jpetstore
SimpleUsername=jpetstore
SimplePassword=ibatis
</code></pre></div>
<p>因为dataSource中的属性值是从database.properties文件中读取的，所以要将database.properties中的属性名改成和sql-xml-config.xml中的一致。这样就不会再出现找不到驱动的异常了。改写后的database.properties内容如下：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">driver=org.gjt.mm.mysql.Driver
url=jdbc:mysql://localhost:3306/jpetstore
username=jpetstore
password=ibatis
</code></pre></div>]]></content>
  </entry>
  
</feed>
