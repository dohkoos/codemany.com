<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: feedback | 乐者为王]]></title>
  <link href="http://codemany.com/tags/feedback/atom.xml" rel="self"/>
  <link href="http://codemany.com/"/>
  <updated>2014-08-24T22:32:13+08:00</updated>
  <id>http://codemany.com/</id>
  <author>
    <name><![CDATA[dohkoos]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[改写Rails 2.x generator到Rails 3.x时的一些记录]]></title>
    <link href="http://codemany.com/blog/2012/05/03/rewrite-some-records-when-the-rails-2-x-generator-to-the-rails-3-x/"/>
    <updated>2012-05-03T07:13:58+08:00</updated>
    <id>http://codemany.com/blog/2012/05/03/rewrite-some-records-when-the-rails-2-x-generator-to-the-rails-3-x</id>
    <content type="html"><![CDATA[<p>因为有个基于Rails 2.x的项目用到了<a href="https://github.com/jsboulanger/feedback">feedback</a>插件，在把项目迁移到Rails 3.x版本后，需要让feedback也支持Rails 3.x。但是原作者早已不再更新该插件，所以只能自动动手，花了两天的时间查资料，该代码，终于改写完成，在github上做了个分支。</p>

<p>Rails 3.x中生成generator可用下面的命令：<br />
```
rails g generator feedback_form<br /></p>

<pre><code>  create  lib/generators/feedback_form&lt;br /&gt;
  create  lib/generators/feedback_form/feedback_form_generator.rb&lt;br /&gt;
  create  lib/generators/feedback_form/USAGE&lt;br /&gt;
  create  lib/generators/feedback_form/templates&lt;br /&gt;
</code></pre>

<p>```</p>

<p><code>
class InitializerGenerator &lt; Rails::Generators::NamedBase&lt;br /&gt;
  source_root File.expand_path("../templates", __FILE__)&lt;br /&gt;
end&lt;br /&gt;
</code></p>

<p>Rails::Generators::NamedBase和Rails::Generators::Base的区别是NamedBase期望至少一个参数。</p>

<p>USAGE是打入--help参数时显示的文档：<br />
<code>
rails generate feedback_form --help&lt;br /&gt;
Usage:&lt;br /&gt;
  rails generate feedback_form NAME [options]&lt;br /&gt;
</code></p>

<p>Rails 2.x的generator中的manifest可以删除了，因为在3.x中每个public方法在生成过程中会被自动调用。</p>

<p>参考资料：<br />
<a href="http://guides.rubyonrails.org/generators.html">http://guides.rubyonrails.org/generators.html</a><br />
<a href="http://railscasts.com/episodes/218-making-generators-in-rails-3">http://railscasts.com/episodes/218-making-generators-in-rails-3</a><br />
<a href="http://blog.loopedstrange.com/modest-rubyist-archive/rails-3-plugins-part4-more-on-generators">http://blog.loopedstrange.com/modest-rubyist-archive/rails-3-plugins-part4-more-on-generators</a><br />
<a href="http://nicksda.apotomo.de/2010/09/getting-a-bloody-rails-3-generator-running-and-testing-it/">http://nicksda.apotomo.de/2010/09/getting-a-bloody-rails-3-generator-running-and-testing-it/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[为Rails应用添加feedback功能]]></title>
    <link href="http://codemany.com/blog/2011/01/05/add-feedback-for-the-rails-application/"/>
    <updated>2011-01-05T05:44:39+08:00</updated>
    <id>http://codemany.com/blog/2011/01/05/add-feedback-for-the-rails-application</id>
    <content type="html"><![CDATA[<p>首先，将Rails中的Prototype替换为jQuery。接着安装<a href="https://github.comjsboulanger/feedback">feedback</a>插件：</p>

<p><code>
script/plugin install git://github.com/jsboulanger/feedback.git
</code></p>

<p>生成代码，由于我们用jQuery替换了Prototype，所以要在后面加上jquery参数：</p>

<p><code>
script/generate feedback_form --jquery
</code></p>

<p>在app/views/layouts/application.html.erb中添加：</p>

<p><code>
&lt;%= javascript_include_tag :defaults %&gt;
</code></p>

<p>在要添加feedback的页面中加上以下代码：</p>

<p><code>
&lt;%= feedback_tab(:position =&gt; 'top') %&gt;
</code></p>

<p>然后修改app/models/feedback_mailer.rb中的设置：</p>

<p><code>
def feedback(feedback)
  @recipients = 'you@yoursite.com'
  @from = 'system@yoursite.com'
  @subject = "[Feedback for YourSite.com] #{feedback.subject}"
  ...
end
</code></p>

<p>这样feedback功能就加上了！</p>
]]></content>
  </entry>
  
</feed>
