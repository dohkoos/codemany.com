
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>PowerBuilder生成可执行文件的小技巧 - 乐者为王</title>
  <meta name="author" content="dohkoos">

  
  <meta name="description" content="1、使用资源文件（.pbr）引用资源 在资源相同目录下建立.pbr文件，其中列出在应用中动态引用的资源文件，每行一个资源，格式如下： 1
2
3
4
5
appico.ico
appbmp1.bmp
appbmp2.bmp
appbmp3.bmp
appbmp4.bmp 在. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://codemany.com/blog/tips-for-creating-executable-file-in-powerbuilder">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="乐者为王" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">乐者为王</a></h1>
  
    <h2>Do one thing, and do it well.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:codemany.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">PowerBuilder生成可执行文件的小技巧</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-29T14:10:04+08:00" pubdate data-updated="true">Mar 29<sup>th</sup>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>1、使用资源文件（.pbr）引用资源</p>

<p>在资源相同目录下建立.pbr文件，其中列出在应用中动态引用的资源文件，每行一个资源，格式如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>appico.ico
</span><span class='line'>appbmp1.bmp
</span><span class='line'>appbmp2.bmp
</span><span class='line'>appbmp3.bmp
</span><span class='line'>appbmp4.bmp</span></code></pre></td></tr></table></div></figure>


<p>在.pbr文件中指定的文件名必须与在脚本中引用的资源匹配，若引用时包含路径，则在.pbr中也必须包含同一路径，否则因PowerBuilder在执行时只是简单地进行字符串比较而导致无法发现该资源。</p>

<p>2、设置可执行文件图标</p>

<p>应用 -> 属性 -> General -> Additional Properties按钮 -> Icon标签页 -> Icon Name</p>

<p>3、可执行文件所需的环境DLL</p>

<p>最简便的方式是使用自带的打包程序PowerBuilder Runtime Packager。这个应用会自动把脱离环境运行所需的DLL等文件筛选出来。运行后会生成一个MSI应用，执行下就可以解压出需要的DLL文件了。</p>

<p>4、Deploy时出现“The current library list is different”信息</p>

<p>在生成可执行文件时经常会碰到这样的异常情况。Debug没问题，Run没问题，Incremental Build或Full Build也没问题，但在Deploy时就出现：</p>

<blockquote><p>The current library list is different than the library list contained within this project. The project library list has been updated. specify build options for the updated list and try again.</p></blockquote>

<p>上面的信息告诉我们当前的库列表和项目配置中的库列表不一致，但明明先前在其它机器上可以Deploy成功的呀！几经周折，终于找到了原因。</p>

<p>首先导出项目配置文件example.srj，可以看到Deploy失败时的配置内容为：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CMP:0,0,0,2,0,0
</span><span class='line'>COM:
</span><span class='line'>DES:
</span><span class='line'>CPY:
</span><span class='line'>PRD:
</span><span class='line'>PVS:1,0,0,x
</span><span class='line'>PVN:1,0,0,x
</span><span class='line'>FVS:1,0,0,x
</span><span class='line'>FVN:1,0,0,x
</span><span class='line'>PBD:C:\example\example.pbl,,0</span></code></pre></td></tr></table></div></figure>


<p>最后一行表明库文件在C盘？可当前的项目文件都是在D盘啊！修改路径后导入配置，点击Deploy按钮，执行成功。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CMP:0,0,0,2,0,0
</span><span class='line'>COM:
</span><span class='line'>DES:
</span><span class='line'>CPY:
</span><span class='line'>PRD:
</span><span class='line'>PVS:1,0,0,x
</span><span class='line'>PVN:1,0,0,x
</span><span class='line'>FVS:1,0,0,x
</span><span class='line'>FVN:1,0,0,x
</span><span class='line'>PBD:D:\example\example.pbl,,0</span></code></pre></td></tr></table></div></figure>


<p>总结了下原因，出现这种失败通常是实际库文件路径和项目配置中的库文件路径不一致导致。修改项目配置或删除重建项目配置就没问题了。</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">dohkoos</span></span>

      








  


<time datetime="2013-03-29T14:10:04+08:00" pubdate data-updated="true">Mar 29<sup>th</sup>, 2013</time>
      


      

<span class="tags">
  
    <a class='tag' href='/tags/powerbuilder/'>PowerBuilder</a>
  
</span>


    </p>
    
  <h3>Related Posts</h3>
  <ul class="posts">
  
    <li class="related">
      <a href="/blog/datawindows-data-buffer/">DataWindow的数据缓冲区</a>
    </li>
  
    <li class="related">
      <a href="/blog/how-to-setup-background-color-of-cell-on-datawindow/">如何设置数据窗口中某行某列的背景颜色</a>
    </li>
  
    <li class="related">
      <a href="/blog/using-antlr-to-build-powerscript-grammar-parser-part4/">使用ANTLR构建PowerScript语法分析器（4）</a>
    </li>
  
    <li class="related">
      <a href="/blog/how-to-call-the-default-mail-client-in-powerbuilder/">PowerBuilder中如何调用默认的邮件客户端</a>
    </li>
  
    <li class="related">
      <a href="/blog/idcardtool-tool-for-chinese-identity-card/">身份证工具IDCardTool</a>
    </li>
  
  </ul>


    
      <div id="jiathis_style_32x32">
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
    <a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a href="http://www.jiathis.com/share/" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v2.jiathis.com/code/jia.js" charset="utf-8"></script>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/draw-2d-bar-graph-using-ichartjs/" title="Previous Post: 使用ichartjs画2D条形图">&laquo; 使用ichartjs画2D条形图</a>
      
      
        <a class="basic-alignment right" href="/blog/page-layout-using-sitemesh/" title="Next Post: 使用SiteMesh做网页布局">使用SiteMesh做网页布局 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/how-to-disable-virtualbox-time-sync-between-host-and-guest/">如何禁止VirtualBox虚拟机和物理机之间的时间同步</a>
      </li>
    
      <li class="post">
        <a href="/blog/read-binary-file-give-wrong-size-in-ruby/">Ruby中读二进制文件时大小错误</a>
      </li>
    
      <li class="post">
        <a href="/blog/tricks-and-tips-for-octopress/">Octopress 2.0使用技巧</a>
      </li>
    
      <li class="post">
        <a href="/blog/migrating-wordpress-to-octopress/">Wordpress迁移到Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/problem-with-nokogiri-when-url-containing-chinese-character/">Nokogiri抓取页面URL含有中文参数的问题</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Recent Comments</h1>
  <div class="dsq-widget">
    <script type="text/javascript" src="http://codemany.disqus.com/recent_comments_widget.js"></script>
  </div>
</section>
<section>
  <h1>Tags</h1>
  <ul class="tag-cloud">
    <a style="font-size: 133%" href="/tags/android/">Android</a>
<a style="font-size: 111%" href="/tags/crack/">Crack</a>
<a style="font-size: 111%" href="/tags/database/">Database</a>
<a style="font-size: 105%" href="/tags/jbookshelf/">JBookShelf</a>
<a style="font-size: 141%" href="/tags/java/">Java</a>
<a style="font-size: 108%" href="/tags/mysql/">MySQL</a>
<a style="font-size: 116%" href="/tags/powerbuilder/">PowerBuilder</a>
<a style="font-size: 120%" href="/tags/qianbao/">Qianbao</a>
<a style="font-size: 150%" href="/tags/rails/">Rails</a>
<a style="font-size: 105%" href="/tags/ruby/">Ruby</a>
<a style="font-size: 102%" href="/tags/struts/">Struts</a>
<a style="font-size: 98%" href="/tags/translation/">Translation</a>
<a style="font-size: 98%" href="/tags/ubuntu/">Ubuntu</a>
<a style="font-size: 108%" href="/tags/windows-server-2008/">Windows Server 2008</a>
<a style="font-size: 111%" href="/tags/wxwidgets/">wxWidgets</a>

  </ul>
</section>
<section>
  <h1>Blogroll</h1>
  <ul>
    <li><a href="http://mindhacks.cn/">刘未鹏MIND HACKS</a></li>
    <li><a href="http://quake.iteye.com/">写程序的70后</a></li>
    <li><a href="http://codingnow.com/">云风的 BLOG</a></li>
    <li><a href="http://dbanotes.net/">DBA Notes</a></li>
    <li><a href="http://www.ruanyifeng.com/blog/">阮一峰的网络日志</a></li>
    <li><a href="http://www.cs.usfca.edu/~galles/visualization/Algorithms.html">Data Structure Visualization</a></li>
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/dohkoos">@dohkoos</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dohkoos',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - dohkoos -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'codemany';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://codemany.com/blog/tips-for-creating-executable-file-in-powerbuilder/';
        var disqus_url = 'http://codemany.com/blog/tips-for-creating-executable-file-in-powerbuilder/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>
