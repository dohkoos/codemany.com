
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>乐者为王</title>
  <meta name="author" content="dohkoos">

  
  <meta name="description" content="安装will_paginate插件： 1
script/plugin install git://github.com/mislav/will_paginate.git 安裝好插件后，在action中將本來的find方法： 1
@contacts = Contact.all 改为 1
@ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://codemany.com/posts/13/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="乐者为王" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-46570161-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">乐者为王</a></h1>
  
    <h2>Do one thing, and do it well.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="codemany.com">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/add-pagination-for-rails-application-with-will-paginate-plugin/">使用will_paginate插件给Rails应用添加分页功能</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-09-09T09:37:26+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>9:37 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>安装<a href="https://github.com/mislav/will_paginate">will_paginate</a>插件：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>script/plugin install git://github.com/mislav/will_paginate.git</span></code></pre></td></tr></table></div></figure>

<p>安裝好插件后，在action中將本來的find方法：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>@contacts = Contact.all</span></code></pre></td></tr></table></div></figure>

<p>改为</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>@contacts = Contact.paginate(:page =&gt; params[:page])</span></code></pre></td></tr></table></div></figure>

<p>然后在action对应的view最后加入以下代码：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;%= will_paginate @contacts %&gt;</span></code></pre></td></tr></table></div></figure>

<p>现在便可以使用分页功能了，该语句会产生如下的HTML代码：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;div class="pagination"&gt;
</span><span class='line'>  &lt;span class="disabled prev_page"&gt;&laquo; Previous&lt;/span&gt;
</span><span class='line'>  &lt;span class="current"&gt;1&lt;/span&gt;
</span><span class='line'>  &lt;a href="/contacts?page=2&s=" rel="next"&gt;2&lt;/a&gt;
</span><span class='line'>  &lt;a href="/contacts?page=2&s=" class="next_page" rel="next"&gt;Next &raquo;&lt;/a&gt;
</span><span class='line'>&lt;/div&gt;</span></code></pre></td></tr></table></div></figure>

<p>下面加入搜索功能，在view的适当位置加入:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;% form_tag contacts_path, :method =&gt; 'get' do %&gt;
</span><span class='line'>&lt;p&gt;
</span><span class='line'>  &lt;%= text_field_tag :s, params[:s] %&gt;
</span><span class='line'>  &lt;%= submit_tag "Search", :name =&gt; nil %&gt;
</span><span class='line'>&lt;/p&gt;
</span><span class='line'>&lt;% end %&gt;</span></code></pre></td></tr></table></div></figure>

<p>并且将action中的代码修改为：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>@contacts = Contact.paginate(
</span><span class='line'>  :page =&gt; params[:page],
</span><span class='line'>  :conditions =&gt; ["name like ?", "%#{params[:s]}%"])</span></code></pre></td></tr></table></div></figure>

<p>试着进行搜索，可以看到搜索结果也很好的进行了分页。</p>

<p>此外will_paginate还提供一些分页统计信息：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Total entries: &lt;%= @contacts.total_entries %&gt;
</span><span class='line'>Total pages: &lt;%= @contacts.total_pages %&gt;
</span><span class='line'>Current page: &lt;%= @contacts.current_page %&gt;</span></code></pre></td></tr></table></div></figure>

<p>最后加上will_paginate推荐的CSS代码：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>.pagination {
</span><span class='line'>  padding: 3px;
</span><span class='line'>  margin: 3px;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>.pagination a {
</span><span class='line'>  padding: 2px 5px 2px 5px;
</span><span class='line'>  margin: 2px;
</span><span class='line'>  border: 1px solid #aaaadd;
</span><span class='line'>  text-decoration: none;
</span><span class='line'>  color: #000099;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>.pagination a:hover, .pagination a:active {
</span><span class='line'>  border: 1px solid #000099;
</span><span class='line'>  color: #000;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>.pagination span.current {
</span><span class='line'>  padding: 2px 5px 2px 5px;
</span><span class='line'>  margin: 2px;
</span><span class='line'>  border: 1px solid #000099;
</span><span class='line'>  font-weight: bold;
</span><span class='line'>  background-color: #000099;
</span><span class='line'>  color: #fff;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>.pagination span.disabled {
</span><span class='line'>  padding: 2px 5px 2px 5px;
</span><span class='line'>  margin: 2px;
</span><span class='line'>  border: 1px solid #eee;
</span><span class='line'>  color: #ddd;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>

<p>在写代码的时候碰到一个问题，网上的文章都使用page_count来表示总的分页数，但我在使用时出现了undefined method &#39;page_count&#39;错误，把page_count换成total_pages后就好了。</p>

<p>2011/1/4更新</p>

<p>这里使用的是2.3.12版本的will_paginate，暂时还不支持i18n，不过可以通过在app/helps/application_helper.rb中添加以下代码来实现：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>include WillPaginate::ViewHelpers
</span><span class='line'>
</span><span class='line'>def will_paginate_with_i18n(collection, options = {})
</span><span class='line'>  will_paginate_without_i18n(collection, options.merge(
</span><span class='line'>                        :previous_label =&gt; I18n.t(:previous, :default =&gt; 'Previous'),
</span><span class='line'>                        :next_label =&gt; I18n.t(:next), :default =&gt; 'Next'))
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>alias_method_chain :will_paginate, :i18n</span></code></pre></td></tr></table></div></figure>

<p>然后在config/locales/zh.yml中添加：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>previous: "&laquo; 前一页"
</span><span class='line'>next: "后一页 &raquo;"</span></code></pre></td></tr></table></div></figure>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/findviewbyid-returns-null/">findViewById()返回null</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-08-18T14:13:35+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>2:13 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>通过findViewById()获取一个Button时一直返回null值，百思不得其解。最后发现是因为在layout文件中使用了id的旧风格，如下所示：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;Button id="@+id/btn_okay" /&gt;</span></code></pre></td></tr></table></div></figure>

<p>改成android:id就成功了。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;Button android:id="@+id/btn_okay" /&gt;</span></code></pre></td></tr></table></div></figure>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/build-a-more-friendly-404-page/">构建一个更友好的404页面</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-07-13T19:01:50+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>7:01 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>用户访问网站时经常会遇到404错误，
404页面是Web开发中老掉牙的话题了。
开发者提高定制的404页面
让体验少一点沮丧
因为定制404页面非常有用
不仅应该提供有关信息，也应该提供即时反馈给开发者，以便问题能尽快被修复。</p>

<p>为了达到这个目的
这里是我开发的定制404页面
能适应网站使用的外观和感觉/观感</p>

<h3 id="总体设计">总体设计</h3>

<p>为了提供有用和特定的信息给用户，需要界定404错误可能的原因。这里是4个可能的原因：</p>

<ol>
<li>用户打错URL或使用过期的书签 a mistyped address</li>
<li>因为站点内失效的链接 a deleted page or content that has moved elsewhere. </li>
<li>搜索引擎返回的失效的链接</li>
<li>其它网站失效的链接造成 a bad link from somewhere else</li>
</ol>

<p>提供错误具体原因的信息
如果是情况2和4，后台程序发送邮件给维护者，失效链接，包括链接指向的URL和用户试图到达的页面</p>

<p>showing the visitor some helpful content would be a good idea.
Depending on your website, you could show recent articles or recently updated pages or perhaps even a custom search box.
it will help visitors find what they need.</p>

<h3 id="定制404页面">定制404页面</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>页面代码</span></code></pre></td></tr></table></div></figure>

<h3 id="后台脚本">后台脚本</h3>

<p>为了确定404错误的来源，程序需要访问HTTP_REFERER环境变量，HTTP_REFERER包含用户过来的页面URL
虽然不能保证它的正确性，因为它可以被伪造
但这不是我们真的要关注的。</p>

<p>一般而言，脚本执行以下步骤：</p>

<ol>
<li>检测HTTP_REFERER确定404错误的来源</li>
<li>显示适当的消息给用户</li>
<li>如果是特定的错误，发送邮件给开发者</li>
</ol>

<h4 id="case-1-mistyped-url-or-out-of-date-bookmark">Case 1: Mistyped URL or out-of-date bookmark</h4>

<p>在这个案例中，HTTP_REFERER可能为空，所以我们要使用下面的代码检查：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>HTTP_REFERER</span></code></pre></td></tr></table></div></figure>

<p>然后在定制的404页面上显示消息，告诉用户问题是什么。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>抱歉，你试图访问的页面http://www.mydomain.com/no-such-page.shtml不存在。
</span><span class='line'>
</span><span class='line'>It looks like this was the result of either a mistyped address or an out-of-date bookmark in your web browser.
</span><span class='line'>
</span><span class='line'>You may want to try searching this site or using our site map to find what you were looking for.</span></code></pre></td></tr></table></div></figure>

<p>在显示消息给用户的同时发送邮件给开发者</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>HTTP_REFERER</span></code></pre></td></tr></table></div></figure>

<h4 id="case-2-broken-link-on-my-website">Case 2: Broken link on my website</h4>

<p>当HTTP_REFERER不为空时，先要检查它是指向本站、其他人的站点，还是搜索引擎。如果包含本站域名，然后就知道用户是从其它页面过来的。使用以下代码检测：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>HTTP_REFERER</span></code></pre></td></tr></table></div></figure>

<p>在本案例中，我们给用户显示消息，告诉他该页面的链接失效了。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Sorry, but the page you were trying to get to, http://www.mydomain.com/
</span><span class='line'>no-such-page.shtml, does not exist.
</span><span class='line'>
</span><span class='line'>Apparently, we have a broken link on our page. An e-mail has just been sent to the person who can fix this and it should be corrected shortly. No further action is required on your part.</span></code></pre></td></tr></table></div></figure>

<p>同时发送包含所有必要信息的邮件给开发者，并且告诉用户邮件已经被发送，失效链接将马上被修正。
邮件的标题设置 要清晰地确定站点上有失效链接 并提供域名
邮件的内容 告诉我用户所在的页面的URL 以及请求页面的URL</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>From: www.mydomain.com 404 script
</span><span class='line'>
</span><span class='line'>Subject: Broken link on my site, www.mydomain.com.
</span><span class='line'>
</span><span class='line'>Message: BROKEN LINK ON MY SITE
</span><span class='line'>
</span><span class='line'>There appears to be a broken link on my page, http://www.mydomain.com/
</span><span class='line'>badlink.shtml. Someone was trying to get to http://www. mydomain.gov/
</span><span class='line'>no-such-page.shtml from that page.  Why don’t you take a look at it and see what’s wrong?</span></code></pre></td></tr></table></div></figure>

<h4 id="case-3-broken-link-from-a-search-engine">Case 3: Broken link from a search engine</h4>

<p>为了确定用户来自搜索引擎结果页面
需要用一个搜索引擎URL列表来检测HTTP_REFERER 这个列表是一个排序的文本文件 这样我们可以在任何时候更新列表而不需要修改脚本</p>

<p>这里是本案例的代码片段：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>my $SEARCHENGINE = "false";
</span><span class='line'>open(FILE, "searchengines.txt") or die "cannot open the file";
</span><span class='line'>while () {
</span><span class='line'>  chomp;
</span><span class='line'>  if (index($referrer, $_) &gt;= 0) {
</span><span class='line'>    $SEARCHENGINE = "true";
</span><span class='line'>  }
</span><span class='line'>}
</span><span class='line'>if ($SEARCHENGINE eq "true") {
</span><span class='line'>   // do something
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>

<p>在本案例中，我们让用户知道搜索引擎返回的是旧链接。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Sorry, but the page you were trying to get to, http://www.mydomain.com/no-such-page.shtml, does not exist.
</span><span class='line'>
</span><span class='line'>It looks like the search engine has returned a link to an old page. These old links should eventually be removed from their indexes but since these are automatically generated there is no one to contact to try to correct the problem.
</span><span class='line'>
</span><span class='line'>You may want to try searching this site or using our site map to find what you were looking for.</span></code></pre></td></tr></table></div></figure>

<p>因为真的没有什么我们可以做的，所以不需要发送邮件。或者也可以发送邮件，仅仅告诉开发者让他知道这个问题。</p>

<h4 id="case-4-broken-link-on-somebody-else’s-website">Case 4: Broken link on somebody else’s website</h4>

<p>如果404错误不是任何前面3种情况的结果，我们知道它是由其他人页面上的失效链接造成。脚本显示适当的信息给用户。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Sorry, but the page you were trying to get to, http://www.mydomain.com/
</span><span class='line'>no-such-page.shtml, does not exist.
</span><span class='line'>
</span><span class='line'>Apparently, there is a broken link on the page you just came from. We have been notified and will attempt to contact the owner of that page and let them know about it.
</span><span class='line'>
</span><span class='line'>You may want to try searching this site or using our site map to find what you were looking for.</span></code></pre></td></tr></table></div></figure>

<p>同时发送邮件给开发者，开发者可以到有失效链接的页面上，如果页面上有所有者的联系信息，可以通知他们这个问题。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>From:www.mydomain.com 404 script
</span><span class='line'>
</span><span class='line'>Subject: Broken link on somebody else’s site.
</span><span class='line'>
</span><span class='line'>Message: BROKEN LINK ON SOMEBODY ELSE’S SITE
</span><span class='line'>
</span><span class='line'>There appears to be a broken link on the page, http://www.somedomain.com/
</span><span class='line'>badlink.shtml.  Someone was trying to get to http://www.mydomain.com/
</span><span class='line'>no-such-page.shtml from that page.  Why don’t you take a look at it and see if you can contact the page owner and let them know about it?</span></code></pre></td></tr></table></div></figure>

<h3 id="最后">最后</h3>

<p>实现定制404页面可以通过帮助用户提高站点的可用性
还能让开发者知道失效的链接</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/with-check-option-in-view/">创建视图时的with check option选项</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-06-28T20:33:27+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>8:33 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>通过有with check option选项的视图操作基表，有以下结论：</p>

<ol>
<li>首先视图只操作它可以查询出来的数据，对于它查询不出的数据，即使基表有，也不可以通过视图来操作；</li>
<li>对于update，有with check option，要保证update后，数据能被视图查询出来；</li>
<li>对于delete，有无with check option都一样；</li>
<li>对于insert，有with check option，要保证insert后，数据要被视图查询出来。</li>
</ol>

<p>对于没有where子句的视图，使用with check option是多余的。</p>

<p>下面用一个例子来说明第4条：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CREATE TABLE students (
</span><span class='line'>    id int NOT NULL AUTO_INCREMENT,
</span><span class='line'>    name varchar(50) NOT NULL,
</span><span class='line'>    age int,
</span><span class='line'>    sex char(1),
</span><span class='line'>    PRIMARY KEY (id)
</span><span class='line'>);
</span><span class='line'>
</span><span class='line'>CREATE VIEW male_students_view AS
</span><span class='line'>    SELECT name, age FROM students
</span><span class='line'>    WHERE sex = 'M'
</span><span class='line'>    WITH CHECK OPTION;</span></code></pre></td></tr></table></div></figure>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-- 报CHECK OPTION failed错误，原因如4，插入数据后要还能被视图查询出来。
</span><span class='line'>INSERT INTO male_students_view VALUES('WU', 18);</span></code></pre></td></tr></table></div></figure>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-- 报Column count doesn't match value count错误，因为视图中根本没有sex列。
</span><span class='line'>INSERT INTO male_students_view VALUES('WU', 18, 'M');</span></code></pre></td></tr></table></div></figure>

<p>将students.sex列改成默认值为M：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ALTER TABLE students MODIFY sex char(1) NOT NULL DEFAULT 'M'</span></code></pre></td></tr></table></div></figure>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-- 执行成功，1 row affected。
</span><span class='line'>INSERT INTO male_students_view VALUES('WU', 18);</span></code></pre></td></tr></table></div></figure>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-- 还是同样的问题，Column count doesn't match value count。
</span><span class='line'>INSERT INTO male_students_view VALUES('WU', 18, 'M');</span></code></pre></td></tr></table></div></figure>

<p>或者不修改students.sex的属性，将视图改成：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CREATE VIEW male_students_view AS
</span><span class='line'>    SELECT name, age, sex FROM students
</span><span class='line'>    WHERE sex = 'M'
</span><span class='line'>    WITH CHECK OPTION;</span></code></pre></td></tr></table></div></figure>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-- 会报CHECK OPTION failed错误。
</span><span class='line'>INSERT INTO male_students_view VALUES('WU', 18);</span></code></pre></td></tr></table></div></figure>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-- 执行成功，1 row affected。
</span><span class='line'>INSERT INTO male_students_view VALUES('WU', 18, 'M');</span></code></pre></td></tr></table></div></figure>

<p>以上例子都在MySQL上实际执行过。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/problem-using-sql-server-2000-personal-edition/">使用SQL Server 2000个人版出现的问题</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-06-01T12:52:33+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2010</span></span> <span class='time'>12:52 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>下午在机房值班，14:00的时候有人报告说交易客户端不能登录了，确定问题后两同事急忙重启AR和AS以及交易网关，可是还是不能登录。紧急重启数据库后问题才解决。</p>

<p>出了问题不可怕，关键是找到问题根源所在，解决问题，使同样的错误不再重复地发生。</p>

<p>打电话联系恒生的工程师，向他们提供系统的日志文件，希望他们那边能提供帮助，找到原因。我也在这边分析系统的事件和日志文件，想找出到底是在哪里出的问题。分析着从SQL Server的LOG目录下找到的几个ERRORLOG文件，发现从13:57开始有连续多条如下的警告语句出现：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>SQL Server已为8个并发查询而优化。36个查询超过了此限制，因而性能可能会受到不良影响。</span></code></pre></td></tr></table></div></figure>

<p>很快，恒生工程师也打电话来说可能是查询数据库过多导致的问题。这个我们一开始就想过，但关键是那时候只连接进来了400个左右的客户，怎么可能查询过多呢？而且平时也没出现过这种情况。</p>

<p>在网上搜索资料后知道出现这个问题通常是数据库版本的原因，检查我们的SQL Server数据库，发现竟然是2000个人版。后来又从交易结算部们了解到他们因为要做报表执行了查询所有客户资料的操作，并且我们的备份数据库在几个星期前曾因损坏做过恢复，恢复的同事忘记修改备份数据库的时间，导致本应该执行在备份数据库上的查询执行在了主数据库上，引起了数据库崩溃。</p>

<p>再次联系恒生的工程师，准备这个周末切换数据库到企业版。唉，又要加班了！</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/why-using-paperclip-instead-of-fleximage-to-upload-image/">为什么使用Paperclip而不是Fleximage来实现图片上传</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-05-28T07:38:50+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>7:38 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Rails有很多处理上传的插件：</p>

<ul>
<li><a href="https://github.com/activescaffold/file_column">FileColumn</a></li>
<li><a href="https://github.com/jnicklas/uploadcolumn">UploadColumn</a></li>
<li><a href="https://code.google.com/p/activeupload/">ActiveUpload</a></li>
<li>acts_as_attachment</li>
<li><a href="https://github.com/technoweenie/attachment_fu">attachment_fu</a></li>
<li><a href="https://github.com/thoughtbot/paperclip">Paperclip</a></li>
<li><a href="https://github.com/Squeegy/fleximage">Fleximage</a></li>
</ul>

<p>FileColumn是最早的这类插件，比较容易使用。UploadColumn与之类似。ActiveUpload则需要SWFUpload配合使用。attachment_fu作为acts_as_attachment的进化版本非常强大，不过使用起来比较复杂。Fleximage是现在上传和处理图片的首选，据说连Paperclip也比不上它，不过使用下来的情况是使用简单，功能太弱。比如要把上传的图片放到以用户名为目录的文件夹中就实现不了，而且上传的图片名字也不能设定。Paperclip作为一个处理附件上传的插件，既有attachment_fu的功能强大，又有Fleximage的使用简单，相对于FileColumn在灵活性和效率上更胜一筹，而且代码也更优雅。</p>

<p>将用户名作为上传图片的目录，先要在config/initializers中创建一个paperclip.rb文件，定义一个username变量：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Paperclip.interpolates :username do |attachment, style|
</span><span class='line'>  attachment.instance.user.login
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>

<p>上面的代码中attachment.instance就是指该附件实例，因为在avatar.rb中有如下语句：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>belongs_to :user</span></code></pre></td></tr></table></div></figure>

<p>所以该实例有一个User对象，User对象有个login字段，该字段就是我们需要的用户名。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/21-laws-of-computer-programming/">计算机编程的21条法则</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-04-26T15:19:26+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>3:19 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>英文原文：<a href="http://www.devtopics.com/21-laws-of-computer-programming/">http://www.devtopics.com/21-laws-of-computer-programming/</a></p>

<p>任何有经验的计算机程序员都知道，有一些不成文的法则支配着软件开发。不过，违反这些法则没有惩罚，相反，经常会有奖励。以下是计算机编程的21条法则：</p>

<ol>
<li>任何给定的程序，一旦部署，已经过时。</li>
<li>修改需求规范来适应程序比反过来做更容易。</li>
<li>如果一个程序是有用的，那它必将被修改。</li>
<li>如果一个程序是无用的，那它必将被文档化。</li>
<li>在任何给定的程序里只有10%的代码会被执行。</li>
<li>软件会扩展到耗尽所有可用的资源。</li>
<li>任何有价值的程序至少包含一个错误。</li>
<li>一次完美演示的概率和观看人数成反比，是所涉及金额的次幂。</li>
<li>一个程序投入运行至少6个月，它最有害的错误才会被发现。</li>
<li>不可检测的错误无限多样，相比之下，可检测的错误从定义上来讲是有限的。</li>
<li>修正错误所需的努力随着时间成指数级增长。</li>
<li>程序的复杂度会一直增长，直到超出维护它的程序员的能力。</li>
<li>你自己的任何代码，几个月没看，就像是别人写的。</li>
<li>在每个小程序里都是一个大程序蠢蠢欲出。</li>
<li>你开始编写一个程序越早，它花费的时间越长。</li>
<li>一个胡乱计划的项目需要比预期多花费3倍的时间来完成；一个精心计划的项目只需要花费2倍的时间。</li>
<li>往一个延迟的项目里添加程序员会使项目更加延迟。</li>
<li>一个程序至少能完成90%，并且至多能完成95%。</li>
<li>如果你想麻烦被自动处理掉，你得到的是自动产生的麻烦。</li>
<li>构建一个连傻瓜都会使用的程序，然后只有傻瓜想要使用它。</li>
<li>用户真的不知道他们想要什么样的程序，直到他们使用它为止。</li>
</ol>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/problem-using-fleximage-to-upload-image/">使用Fleximage上传图片时的问题</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-04-05T18:09:40+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>6:09 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>因为只是处理图片，所以选择了<a href="https://github.com/Squeegy/fleximage">Fleximage</a>，一个单纯的上传和处理图片的Rails插件。本来是想用Fleximage和<a href="https://github.com/minimagick/minimagick">MiniMagick</a>的，据说RMagick内存泄露的问题比较厉害，作为替代品MiniMagick不存在内存泄露的问题，因Fleximage不能指定processor而作罢。</p>

<p>Fleximage项目的Wiki上有些资料已经过时了。它说渲染图片的时候要创建flexi文件，还要修改相应的action方法，添加format.image_type到respond_to代码块中，并且在view中使用formatted_photo_path来显示图片，但事实上formatted_photo_path已经被废弃了（起先也没发现，直到为了解决一个问题查看log后才知道），可以直接使用image_tag或photo_url。或者干脆不建什么flexi文件，也不添加format.image_type到action中，直接就在view中使用embedded_image_tag方法，也可以渲染图片的。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/sqlite3-ruby-and-uninitialized-constant-encoding/">sqlite3-ruby和uninitialized constant Encoding</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-03-30T12:58:13+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>12:58 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ruby 1.8.6 + Rails 2.3.5</p>

<p>创建项目后在运行rake db:migrate时出现了以下错误：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>** Invoke db:migrate (first_time)
</span><span class='line'>** Invoke environment (first_time)
</span><span class='line'>** Execute environment
</span><span class='line'>** Execute db:migrate
</span><span class='line'>rake aborted!
</span><span class='line'>uninitialized constant Encoding</span></code></pre></td></tr></table></div></figure>

<p>具体错误信息如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/active_support/dependencies.rb:443:in 'load_missing_constant'
</span><span class='line'>/active_support/dependencies.rb:80:in 'const_missing'
</span><span class='line'>/active_support/dependencies.rb:92:in 'const_missing'
</span><span class='line'>/sqlite3-0.0.8/lib/sqlite3/encoding.rb:9:in 'find'
</span><span class='line'>/sqlite3-0.0.8/lib/sqlite3/database.rb:66:in 'initialize'
</span><span class='line'>/active_record/connection_adapters/sqlite3_adapter.rb:13:in 'new'
</span><span class='line'>/active_record/connection_adapters/sqlite3_adapter.rb:13:in 'sqlite3_connection'
</span><span class='line'>/active_record/connection_adapters/abstract/connection_pool.rb:223:in 'send'
</span><span class='line'>/active_record/connection_adapters/abstract/connection_pool.rb:223:in 'new_connection'
</span><span class='line'>/active_record/connection_adapters/abstract/connection_pool.rb:245:in 'checkout_new_connection'
</span><span class='line'>/active_record/connection_adapters/abstract/connection_pool.rb:188:in 'checkout'
</span><span class='line'>/active_record/connection_adapters/abstract/connection_pool.rb:184:in 'loop'
</span><span class='line'>/active_record/connection_adapters/abstract/connection_pool.rb:184:in 'checkout'</span></code></pre></td></tr></table></div></figure>

<p>从 <a href="http://stackoverflow.com/questions/1797199/uninitialized-constant-encoding-with-sqlite3-ruby-on-windows">http://stackoverflow.com/questions/1797199/uninitialized-constant-encoding-with-sqlite3-ruby-on-windows</a> 查到原因说是因为安装了非sqlite3-ruby包所导致。记起安装SQLite时使用的命令是gem install sqlite3，而实际上sqlite3包仅是针对ruby 1.9版本，在1.8.6上需要使用sqlite3-ruby包。用gem list查看发现果然安装的是sqlite3包。gem uninstall sqlite3把它卸载掉，然后装上sqlite3-ruby包，再次运行rake db:migrate，可以了，不再出现错误信息了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/create-scalable-breadcrumbs-using-css/">使用CSS创建可伸缩的面包屑</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-03-16T15:41:23+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>3:41 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>面包屑是一个用来描述层次性链接的术语，告诉用户当前处于网站的什么位置。简单的来说，就是显示从主页到当前页面路径的导航模式。其最简单的形式通常是这样的: </p>

<p><img src="/uploads/css-breadcrumbs.png" title="css-breadcrumbs" ></p>

<p>有许多种不同的方法来实现面包屑。在这里，我们仅使用无序列表和基本的CSS样式。</p>

<p>以下是HTML代码：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;ul id="breadcrumbs"&gt;
</span><span class='line'>  &lt;li&gt;&lt;a href="#"&gt;Home&lt;/a&gt; &gt; &lt;/li&gt;
</span><span class='line'>  &lt;li&gt;&lt;a href="#"&gt;Main&lt;/a&gt; &gt; &lt;/li&gt;
</span><span class='line'>  &lt;li&gt;&lt;a href="#"&gt;Sub&lt;/a&gt; &gt; &lt;/li&gt;
</span><span class='line'>  &lt;li&gt;&lt;a href="#"&gt;Sub sub&lt;/a&gt; &gt; &lt;/li&gt;
</span><span class='line'>  &lt;li&gt;Current page&lt;/li&gt;
</span><span class='line'>&lt;/ul&gt;</span></code></pre></td></tr></table></div></figure>

<p>在上述的例子中，除了用户当前所在的页面——即最后一个条目外，其它所有的条目都是链接，指向路径中的某个页面。</p>

<p>如果你试着在浏览器中查看上面的这个例子，你会发现它只是一个简单的无序列表。必须给它添加一些CSS样式才能符合我们的预期。</p>

<p>下面是CSS代码：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ul, li {
</span><span class='line'>  list-style-type: none;
</span><span class='line'>  padding: 0;
</span><span class='line'>  margin: 0;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>

<p>首先我们要重置基本列表样式的行为：把默认的圆形条目符号隐藏掉，并移除缩进。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#breadcrumbs {
</span><span class='line'>  height: 2.3em;
</span><span class='line'>}
</span><span class='line'>  
</span><span class='line'>#breadcrumbs li {
</span><span class='line'>  float: left;
</span><span class='line'>  line-height: 2.3em;
</span><span class='line'>  padding-left: .25em;
</span><span class='line'>  color: #777;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>

<p>然后，给面包屑设置一个具体的高度。因为所有的碎屑需要保持在同一水平线，所以我们把每个li元素设置成float: left。为保证条目的垂直居中对齐，需要把条目的行高设置成和列表相等。碎屑之间需要留些空间，不然的话就会太拥挤，因此我们给每个碎屑左边加上0.25em的填充。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#breadcrumbs li a:link, #breadcrumbs li a:visited {
</span><span class='line'>  text-decoration: none;
</span><span class='line'>  color: #777;
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>#breadcrumbs li a:hover, #breadcrumbs li a:focus {
</span><span class='line'>  color: #dd2c0d;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>

<p>最后，给文本链接添加样式，使用text-decoration: none隐藏掉下划线。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/14">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/12">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/how-to-build-a-news-website-layout-with-flexbox/">如何使用Flexbox构建新闻站点布局</a>
      </li>
    
      <li class="post">
        <a href="/blog/logic-problems-who-owns-the-fish/">逻辑题-谁养鱼</a>
      </li>
    
      <li class="post">
        <a href="/blog/developers-are-blinded-by-the-light/">开发者被灯光蒙蔽了双眼</a>
      </li>
    
      <li class="post">
        <a href="/blog/books-not-recommended/">哪些书不要读</a>
      </li>
    
      <li class="post">
        <a href="/blog/economic-inequality-the-short-version/">贫富差距精简版</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Recent Comments</h1>
  <div class="dsq-widget">
    <script type="text/javascript" src="http://codemany.disqus.com/recent_comments_widget.js"></script>
  </div>
</section>
<section>
  <h1>Tags</h1>
  <ul class="tag-cloud">
    <a style="font-size: 124%" href="/tags/antlr/">ANTLR</a>
<a style="font-size: 107%" href="/tags/algorithm/">Algorithm</a>
<a style="font-size: 132%" href="/tags/android/">Android</a>
<a style="font-size: 104%" href="/tags/c-plus-plus/">C++</a>
<a style="font-size: 104%" href="/tags/css/">CSS</a>
<a style="font-size: 110%" href="/tags/crack/">Crack</a>
<a style="font-size: 107%" href="/tags/database/">Database</a>
<a style="font-size: 97%" href="/tags/eclipse/">Eclipse</a>
<a style="font-size: 113%" href="/tags/git/">Git</a>
<a style="font-size: 97%" href="/tags/html/">HTML</a>
<a style="font-size: 104%" href="/tags/jbookshelf/">JBookShelf</a>
<a style="font-size: 149%" href="/tags/java/">Java</a>
<a style="font-size: 101%" href="/tags/javascript/">JavaScript</a>
<a style="font-size: 97%" href="/tags/listview/">ListView</a>
<a style="font-size: 104%" href="/tags/mysql/">MySQL</a>
<a style="font-size: 97%" href="/tags/paperclip/">Paperclip</a>
<a style="font-size: 124%" href="/tags/powerbuilder/">PowerBuilder</a>
<a style="font-size: 110%" href="/tags/powerscript/">PowerScript</a>
<a style="font-size: 117%" href="/tags/qianbao/">Qianbao</a>
<a style="font-size: 150%" href="/tags/rails/">Rails</a>
<a style="font-size: 119%" href="/tags/ruby/">Ruby</a>
<a style="font-size: 97%" href="/tags/spring/">Spring</a>
<a style="font-size: 101%" href="/tags/struts/">Struts</a>
<a style="font-size: 131%" href="/tags/translation/">Translation</a>
<a style="font-size: 97%" href="/tags/ubuntu/">Ubuntu</a>
<a style="font-size: 107%" href="/tags/windows-server-2008/">Windows Server 2008</a>
<a style="font-size: 107%" href="/tags/wxwidgets/">wxWidgets</a>

  </ul>
</section>
<section>
  <h1>Blogroll</h1>
  <ul>
    <li><a href="http://mindhacks.cn/">刘未鹏MIND HACKS</a></li>
    <li><a href="http://www.importnew.com/">ImportNew</a></li>
    <li><a href="http://ifeve.com/">并发编程网</a></li>
    <li><a href="http://codingnow.com/">云风的 BLOG</a></li>
    <li><a href="http://dbanotes.net/">DBA Notes</a></li>
    <li><a href="http://www.ruanyifeng.com/blog/">阮一峰的网络日志</a></li>
    <li><a href="http://advdbg.org/">高端调试</a></li>
    <li><a href="http://www.cs.usfca.edu/~galles/visualization/Algorithms.html">Data Structure Visualization</a></li>
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/dohkoos">@dohkoos</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dohkoos',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>
  <div>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</div>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - dohkoos -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'codemany';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>
